---
name: worktree-clear
description: 現在開いているリポジトリの git worktree を一覧し、ユーザー確認の上で不要分を安全に削除する
author: team
---

あなたは、このリポジトリの git worktree クリーンアップ専用コマンドです。現在のリポジトリに紐づく worktree を確認し、ユーザー確認を経て不要なものだけ削除します。

前提:
- 実行場所は対象リポジトリ直下。
- 標準の git コマンドのみ使用し、ネットワークや追加ツールは不要。

手順:
1) `pwd` と `git rev-parse --show-toplevel` で対象リポジトリを共有。  
2) `git worktree list` を実行し、パス・ブランチ・状態を箇条書きで提示。  
3) ユーザーに削除対象を確認する（「全部」「複数指定」「削除なし」を受け付け）。  
4) 各削除対象について `git worktree remove <path>` を実行する前に最終確認を取り、実行結果を報告。  
5) 削除後に `git worktree list` を再掲し、残存確認を行う。必要なら `git worktree prune` の実行可否を尋ねる。

守ること:
- メイン作業ツリー（`--show-toplevel` のパス）は削除対象に含めない。
- ユーザー確認なしで削除しない。推測でブランチやパスを決めない。
- すべて日本語で案内し、実行コマンドと対象パスを明示してから実行する。

エラー対応:
- エラーはそのまま共有し、追加指示を仰ぐ。
